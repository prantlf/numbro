/*!
 * numbro.js
 * version : 1.6.2
 * author : FÃ¶retagsplatsen AB
 * license : MIT
 * http://www.foretagsplatsen.se
 */
(function(){"use strict";/************************************
        Constructors
    ************************************/
// Numbro prototype object
//   number: number to initialize the numbro instance with
//   config: optional overrides for global configuration variables
function a(a,b){var c;
// clone the configuration not to modify the source object
if(this._value=a,this._config={},b)for(c in b)Object.hasOwnProperty.call(b,c)&&(this._config[c]=b[c])}function b(a){var b,c="";for(b=0;a>b;b++)c+="0";return c}/**
     * Implementation of toFixed() for numbers with exponent > 21
     *
     *
     */
function c(a,c){var d,e,f,g,h;return h=a.toString(),d=h.split("e")[0],g=h.split("e")[1],e=d.split(".")[0],f=d.split(".")[1]||"",h=e+f+b(g-f.length),c>0&&(h+="."+b(c)),h}/**
     * Implementation of toFixed() that treats floats more like decimals
     *
     * Fixes binary rounding issues (eg. (0.615).toFixed(2) === '0.61') that present
     * problems for accounting- and finance-related software.
     */
function d(a,b,d,e){var f,g,h=Math.pow(10,b);
// Above 1e21, toFixed returns scientific notation, which
// is useless and unexpected
return g=a.toFixed(0).search("e")>-1?c(a,b):(d(a+"e+"+b)/h).toFixed(b),e&&(f=new RegExp("0{1,"+e+"}$"),g=g.replace(f,"")),g}/************************************
        Formatting
    ************************************/
// determine what type of formatting we need to do
function e(a,b,c){var d;
// return string
// figure out what kind of format we are dealing with
// currency!!!!!
return d=b.indexOf("$")>-1?g(a,b,c):b.indexOf("%")>-1?h(a,b,c):b.indexOf(":")>-1?i(a,b):k(a,a._value,b,c)}
// revert to number
function f(a,b){var c,d,e,f,g,h,i=b,k=w[a._config.currentCulture||x],l=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],m=["KB","MB","GB","TB","PB","EB","ZB","YB"],n=!1;if(b.indexOf(":")>-1)a._value=j(b);else if(c=a._config.zeroFormat||y,b===c)a._value=0;else{
// see if bytes are there so that we can multiply to the correct number
for("."!==k.delimiters.decimal&&(b=b.replace(/\./g,"").replace(k.delimiters.decimal,".")),d=new RegExp("[^a-zA-Z]"+k.abbreviations.thousand+"(?:\\)|(\\"+k.currency.symbol+")?(?:\\))?)?$"),e=new RegExp("[^a-zA-Z]"+k.abbreviations.million+"(?:\\)|(\\"+k.currency.symbol+")?(?:\\))?)?$"),f=new RegExp("[^a-zA-Z]"+k.abbreviations.billion+"(?:\\)|(\\"+k.currency.symbol+")?(?:\\))?)?$"),g=new RegExp("[^a-zA-Z]"+k.abbreviations.trillion+"(?:\\)|(\\"+k.currency.symbol+")?(?:\\))?)?$"),h=0;h<=l.length&&!n;h++)b.indexOf(l[h])>-1?n=Math.pow(1024,h+1):b.indexOf(m[h])>-1&&(n=Math.pow(1e3,h+1));
// do some math to create our number
a._value=(n?n:1)*(i.match(d)?Math.pow(10,3):1)*(i.match(e)?Math.pow(10,6):1)*(i.match(f)?Math.pow(10,9):1)*(i.match(g)?Math.pow(10,12):1)*(b.indexOf("%")>-1?.01:1)*((b.split("-").length+Math.min(b.split("(").length-1,b.split(")").length-1))%2?1:-1)*Number(b.replace(/[^0-9\.]+/g,"")),
// round if we are talking about bytes
a._value=n?Math.ceil(a._value):a._value}return a._value}function g(a,b,c){var d,e,f=b,g=w[a._config.currentCulture||x],h=f.indexOf("$"),i=f.indexOf("("),j=f.indexOf("+"),l=f.indexOf("-"),m="",n="";if(-1===f.indexOf("$")?
// Use defaults instead of the format provided
"infix"===g.currency.position?(n=g.currency.symbol,g.currency.spaceSeparated&&(n=" "+n+" ")):g.currency.spaceSeparated&&(m=" "):f.indexOf(" $")>-1?(m=" ",f=f.replace(" $","")):f.indexOf("$ ")>-1?(m=" ",f=f.replace("$ ","")):f=f.replace("$",""),e=k(a,a._value,f,c,n),-1===b.indexOf("$"))
// Use defaults instead of the format provided
switch(g.currency.position){case"postfix":e.indexOf(")")>-1?(e=e.split(""),e.splice(-1,0,m+g.currency.symbol),e=e.join("")):e=e+m+g.currency.symbol;break;case"infix":break;case"prefix":e.indexOf("(")>-1||e.indexOf("-")>-1?(e=e.split(""),d=Math.max(i,l)+1,e.splice(d,0,g.currency.symbol+m),e=e.join("")):e=g.currency.symbol+m+e;break;default:throw Error('Currency position should be among ["prefix", "infix", "postfix"]')}else
// position the symbol
1>=h?e.indexOf("(")>-1||e.indexOf("+")>-1||e.indexOf("-")>-1?(e=e.split(""),d=1,(i>h||j>h||l>h)&&(d=0),e.splice(d,0,g.currency.symbol+m),e=e.join("")):e=g.currency.symbol+m+e:e.indexOf(")")>-1?(e=e.split(""),e.splice(-1,0,m+g.currency.symbol),e=e.join("")):e=e+m+g.currency.symbol;return e}function h(a,b,c){var d,e="",f=100*a._value;
// check for space before %
return b.indexOf(" %")>-1?(e=" ",b=b.replace(" %","")):b=b.replace("%",""),d=k(a,f,b,c),d.indexOf(")")>-1?(d=d.split(""),d.splice(-1,0,e+"%"),d=d.join("")):d=d+e+"%",d}function i(a){var b=Math.floor(a._value/60/60),c=Math.floor((a._value-60*b*60)/60),d=Math.round(a._value-60*b*60-60*c);return b+":"+(10>c?"0"+c:c)+":"+(10>d?"0"+d:d)}function j(a){var b=a.split(":"),c=0;
// turn hours and minutes into seconds and add them all up
// hours
// minutes
// seconds
// minutes
// seconds
return 3===b.length?(c+=60*Number(b[0])*60,c+=60*Number(b[1]),c+=Number(b[2])):2===b.length&&(c+=60*Number(b[0]),c+=Number(b[1])),Number(c)}function k(a,b,c,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,z,A,B=!1,C=!1,D=!1,E="",F=!1,// force abbreviation to thousands
G=!1,// force abbreviation to millions
H=!1,// force abbreviation to billions
I=!1,// force abbreviation to trillions
J=!1,// force abbreviation
K="",L="",M=Math.abs(b),N=w[a._config.currentCulture||x],O=a._config.zeroFormat||y,P=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],Q=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],R="",S=!1,T=!1,U="";
// check if number is zero and a custom zero format has been set
if(0===b&&null!==O)return O;if(!isFinite(b))return""+b;if(0===c.indexOf("{")){var V=c.indexOf("}");if(-1===V)throw Error('Format should also contain a "}"');r=c.slice(1,V),c=c.slice(V+1)}else r="";if(c.indexOf("}")===c.length-1){var W=c.indexOf("{");if(-1===W)throw Error('Format should also contain a "{"');s=c.slice(W+1,-1),c=c.slice(0,W+1)}else s="";
// check for min length
var X;
// see if abbreviation is wanted
if(X=-1===c.indexOf(".")?c.match(/([0-9]+).*/):c.match(/([0-9]+)\..*/),A=null===X?-1:X[1].length,-1!==c.indexOf("-")&&(S=!0),c.indexOf("(")>-1?(B=!0,c=c.slice(1,-1)):c.indexOf("+")>-1&&(C=!0,c=c.replace(/\+/g,"")),c.indexOf("a")>-1){if(p=c.split(".")[0].match(/[0-9]+/g)||["0"],p=parseInt(p[0],10),F=c.indexOf("aK")>=0,G=c.indexOf("aM")>=0,H=c.indexOf("aB")>=0,I=c.indexOf("aT")>=0,J=F||G||H||I,c.indexOf(" a")>-1?(E=" ",c=c.replace(" a","")):c=c.replace("a",""),k=Math.floor(Math.log(M)/Math.LN10)+1,m=k%3,m=0===m?3:m,p&&0!==M&&(l=Math.floor(Math.log(M)/Math.LN10)+1-p,n=3*~~((Math.min(p,k)-m)/3),M/=Math.pow(10,n),-1===c.indexOf(".")&&p>3))for(c+="[.]",v=0===l?0:3*~~(l/3)-l,v=0>v?v+3:v,g=0;v>g;g++)c+="0";Math.floor(Math.log(Math.abs(b))/Math.LN10)+1!==p&&(M>=Math.pow(10,12)&&!J||I?(E+=N.abbreviations.trillion,b/=Math.pow(10,12)):M<Math.pow(10,12)&&M>=Math.pow(10,9)&&!J||H?(E+=N.abbreviations.billion,b/=Math.pow(10,9)):M<Math.pow(10,9)&&M>=Math.pow(10,6)&&!J||G?(E+=N.abbreviations.million,b/=Math.pow(10,6)):(M<Math.pow(10,6)&&M>=Math.pow(10,3)&&!J||F)&&(E+=N.abbreviations.thousand,b/=Math.pow(10,3)))}
// see if we are formatting binary bytes
if(c.indexOf("b")>-1)for(
// check for space before
c.indexOf(" b")>-1?(K=" ",c=c.replace(" b","")):c=c.replace("b",""),j=0;j<=P.length;j++)if(h=Math.pow(1024,j),i=Math.pow(1024,j+1),b>=h&&i>b){K+=P[j],h>0&&(b/=h);break}
// see if we are formatting decimal bytes
if(c.indexOf("d")>-1)for(
// check for space before
c.indexOf(" d")>-1?(K=" ",c=c.replace(" d","")):c=c.replace("d",""),j=0;j<=Q.length;j++)if(h=Math.pow(1e3,j),i=Math.pow(1e3,j+1),b>=h&&i>b){K+=Q[j],h>0&&(b/=h);break}if(
// see if ordinal is wanted
c.indexOf("o")>-1&&(
// check for space before
c.indexOf(" o")>-1?(L=" ",c=c.replace(" o","")):c=c.replace("o",""),N.ordinal&&(L+=N.ordinal(b))),c.indexOf("[.]")>-1&&(D=!0,c=c.replace("[.]",".")),o=b.toString().split(".")[0],q=c.split(".")[1],t=c.indexOf(","),q){if(-1!==q.indexOf("*")?R=d(b,b.toString().split(".")[1].length,e):q.indexOf("[")>-1?(q=q.replace("]",""),q=q.split("["),R=d(b,q[0].length+q[1].length,e,q[1].length)):R=d(b,q.length,e),o=R.split(".")[0],R.split(".")[1].length){var Y=f?E+f:N.delimiters.decimal;R=Y+R.split(".")[1]}else R="";D&&0===Number(R.slice(1))&&(R="")}else o=d(b,0,e);
// format number
return o.indexOf("-")>-1&&(o=o.slice(1),T=!0),o.length<A&&(o=new Array(A-o.length+1).join("0")+o),t>-1&&(o=o.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+N.delimiters.thousands)),0===c.indexOf(".")&&(o=""),u=c.indexOf("("),z=c.indexOf("-"),U=z>u?(B&&T?"(":"")+(S&&T||!B&&T?"-":""):(S&&T||!B&&T?"-":"")+(B&&T?"(":""),r+U+(!T&&C&&0!==b?"+":"")+o+R+(L?L:"")+(E&&!f?E:"")+(K?K:"")+(B&&T?")":"")+s}/************************************
        Top Level Functions
    ************************************/
// Clones the specified or the current global configuration to a new
// numbro factory function, which will be configurable separately
function l(a){a||(a={});
// Configuration of the numro factory function clone
var b={currentCulture:a.currentCulture||x,zeroFormat:a.zeroFormat||y,defaultFormat:a.defaultFormat||z,defaultCurrencyFormat:a.defaultCurrencyFormat||A},c=function(a){return n(a,b)};
// Clones the numbro factory function with its current configuration
// version number
// compare numbro object
// This function will load languages and then set the global language.  If
// no arguments are passed in, it will simply return the current global
// language key.
// This function will load cultures and then set the global culture.  If
// no arguments are passed in, it will simply return the current global
// culture key.
// This function allow the user to set a new language with a fallback if
// the language does not exist. If no fallback language is provided,
// it fallbacks to english.
// This function allow the user to set a new culture with a fallback if
// the culture does not exist. If no fallback culture is provided,
// it fallbacks to English.
// This function provides access to the loaded language data.  If
// no arguments are passed in, it will simply return the current
// global language object.
// This function provides access to the loaded culture data.  If
// no arguments are passed in, it will simply return the current
// global culture object.
return c.clone=function(){return l(b)},c.version=t.version,c.isNumbro=t.isNumbro,c.language=function(a,d){var e;if(console.warn("`language` is deprecated since version 1.6.0. Use `culture` instead"),!a)return b.currentCulture;if(a&&!d){if(e=w[a],!e)throw new Error("Unknown language : "+a);b.currentCulture=a,o(c,e)}return(d||!w[a])&&m(a,d),c},c.culture=function(a,d){var e;if(!a)return b.currentCulture;if(a&&!d){if(e=v[a],!e)throw new Error("Unknown culture : "+a);b.currentCulture=a,o(c,e)}return(d||!v[a])&&m(a,d),c},c.setLanguage=t.setLanguage,c.setCulture=t.setCulture,c.languageData=function(a){return console.warn("`languageData` is deprecated since version 1.6.0. Use `cultureData` instead"),a?t.languageData(a):w[b.currentCulture]},c.cultureData=function(a){return a?t.cultureData(a):v[b.currentCulture]},c.languages=t.languages,c.cultures=t.cultures,c.zeroFormat=function(a){b.zeroFormat="string"==typeof a?a:null},c.defaultFormat=function(a){b.defaultFormat="string"==typeof a?a:"0.0"},c.defaultCurrencyFormat=function(a){b.defaultCurrencyFormat="string"==typeof a?a:"0$"},c.validate=t.validate,c.loadLanguagesInNode=t.loadLanguagesInNode,c.loadCulturesInNode=t.loadCulturesInNode,c}/************************************
        Helpers
    ************************************/
function m(a,b){v[a]=b}
// Creates a new numbro instance
function n(b,c){var d,e;
// Do not call unformat on the prototype; instance
// configuration may be accessed
return t.isNumbro(b)?new a(b.value(),b._config):0===b||"undefined"==typeof b?new a(0,c):(d=Number(b),isNaN(d)?(e=new a(void 0,c),e.set(e.unformat(b)),e):new a(d,c))}
// Propagates language defaults to the caller context
function o(a,b){var c=b.defaults;c&&(c.format&&a.defaultFormat(c.format),c.currencyFormat&&a.defaultCurrencyFormat(c.currencyFormat))}
// Checks if the preferred culture exists and return is, if it does;
// if that culture does not exist, it continues looking for a similar
// culture by the language prefix, then by the country suffix.  If
// nothing is found, it returns the fallback language, or English,
// if no fallback is provided.
function p(a,b){var c,d,e;return v[a]||(c=a.split("-")[0],Object.keys(v).some(function(a){return a.split("-")[0]===c?(e=a,!0):void 0}),e||(d=a.split("-")[1],d&&Object.keys(v).some(function(a){return a.split("-")[1]===d?(e=a,!0):void 0})),a=e||b||"en-US"),a}function q(){return"undefined"!=typeof process&&void 0===process.browser&&("node"===process.title||"grunt"===process.title)}/**
     * Computes the multiplier necessary to make x >= 1,
     * effectively eliminating miscalculations caused by
     * finite precision.
     */
function r(a){var b=a.toString().split(".");return b.length<2?1:Math.pow(10,b[1].length)}/**
     * Given a variable number of arguments, returns the maximum
     * multiplier that must be used to normalize an operation involving
     * all of them.
     */
function s(){var a=Array.prototype.slice.call(arguments);return a.reduce(function(a,b){var c=r(a),d=r(b);return c>d?c:d},-(1/0))}/************************************
        Constants
    ************************************/
var t,u="1.6.2",
// internal storage for culture config files
v={},
// Todo: Remove in 2.0.0
w=v,
// global configuration, overridable in Numbro instances
x="en-US",y=null,z="0,0",A="0$",
// check for nodeJS
B="undefined"!=typeof module&&module.exports,
// default culture
C={delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"},currency:{symbol:"$",position:"prefix"},defaults:{currencyFormat:",0000 a"},formats:{fourDigits:"0000 a",fullWithTwoDecimals:"$ ,0.00",fullWithTwoDecimalsNoCurrency:",0.00"}};t=function(a){return n(a)},t.clone=function(){return l()},t.version=u,t.isNumbro=function(b){return b instanceof a},t.setLanguage=function(a,b){console.warn("`setLanguage` is deprecated since version 1.6.0. Use `setCulture` instead"),a=p(a,b),this.language(a)},t.setCulture=function(a,b){a=p(a,b),this.culture(a)},t.language=function(a,b){var c;if(console.warn("`language` is deprecated since version 1.6.0. Use `culture` instead"),!a)return x;if(a&&!b){if(c=w[a],!c)throw new Error("Unknown language : "+a);x=a,o(t,c)}return(b||!w[a])&&m(a,b),t},t.culture=function(a,b){var c;if(!a)return x;if(a&&!b){if(c=v[a],!c)throw new Error("Unknown culture : "+a);x=a,o(t,c)}return(b||!v[a])&&m(a,b),t},t.languageData=function(a){if(console.warn("`languageData` is deprecated since version 1.6.0. Use `cultureData` instead"),!a)return w[x];if(!w[a])throw new Error("Unknown language : "+a);return w[a]},t.cultureData=function(a){if(!a)return v[x];if(!v[a])throw new Error("Unknown culture : "+a);return v[a]},t.culture("en-US",C),t.languages=function(){return console.warn("`languages` is deprecated since version 1.6.0. Use `cultures` instead"),w},t.cultures=function(){return v},t.zeroFormat=function(a){y="string"==typeof a?a:null},t.defaultFormat=function(a){z="string"==typeof a?a:"0.0"},t.defaultCurrencyFormat=function(a){A="string"==typeof a?a:"0$"},t.validate=function(a,b){var c,d,e,f,g,h,i,j;if("string"!=typeof a&&(a+="",console.warn&&console.warn("Numbro.js: Value is not string. It has been co-erced to: ",a)),a=a.trim(),a.match(/^\d+$/))return!0;if(""===a)return!1;try{i=this.cultureData(b)}catch(k){i=this.cultureData(this.culture())}return e=i.currency.symbol,g=i.abbreviations,c=i.delimiters.decimal,d="."===i.delimiters.thousands?"\\.":i.delimiters.thousands,j=a.match(/^[^\d]+/),null!==j&&(a=a.substr(1),j[0]!==e)?!1:(j=a.match(/[^\d]+$/),null!==j&&(a=a.slice(0,-1),j[0]!==g.thousand&&j[0]!==g.million&&j[0]!==g.billion&&j[0]!==g.trillion)?!1:(h=new RegExp(d+"{2}"),a.match(/[^\d.,]/g)?!1:(f=a.split(c),f.length>2?!1:f.length<2?!!f[0].match(/^\d+.*\d$/)&&!f[0].match(h):1===f[0].length?!!f[0].match(/^\d+$/)&&!f[0].match(h)&&!!f[1].match(/^\d+$/):!!f[0].match(/^\d+.*\d$/)&&!f[0].match(h)&&!!f[1].match(/^\d+$/))))},t.includeLocalesInNode=function(a,b){if(q()){var c=require("path");b.forEach(function(b){var d=require(c.join(__dirname,a,b));this.culture(d.langLocaleCode,d)},this)}},t.loadLanguagesInNode=function(a){if(console.warn("`loadLanguagesInNode` is deprecated since version 1.6.0. Use `loadCulturesInNode` instead"),q()){var b=require("fs"),c=require("path"),d=b.readdirSync(c.join(__dirname,a));this.includeLocalesInNode(a,d)}},t.loadCulturesInNode=function(a){if(q()){var b=require("fs"),c=require("path"),d=b.readdirSync(c.join(__dirname,a));this.includeLocalesInNode(a,d)}},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(a,b){if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var c,d,e=this.length>>>0,f=!1;for(1<arguments.length&&(d=b,f=!0),c=0;e>c;++c)this.hasOwnProperty(c)&&(f?d=a(d,this[c],c,this):(d=this[c],f=!0));if(!f)throw new TypeError("Reduce of empty array with no initial value");return d}),t.fn=a.prototype={clone:function(){return t(this)},format:function(a,b){var c=this._config.defaultFormat||z;return e(this,a?a:c,void 0!==b?b:Math.round)},formatCurrency:function(a,b){var c=this._config.defaultCurrencyFormat||A;return g(this,a?a:c,void 0!==b?b:Math.round)},unformat:function(a){var b;return"[object Number]"===Object.prototype.toString.call(a)?a:(b=this._config.defaultFormat||z,f(this,a?a:b))},value:function(){return this._value},valueOf:function(){return this._value},set:function(a){return this._value=Number(a),this},add:function(a){function b(a,b){return a+c*b}var c=s.call(null,this._value,a);return this._value=[this._value,a].reduce(b,0)/c,this},subtract:function(a){function b(a,b){return a-c*b}var c=s.call(null,this._value,a);return this._value=[a].reduce(b,this._value*c)/c,this},multiply:function(a){function b(a,b){var c=s(a,b),d=a*c;return d*=b*c,d/=c*c}return this._value=[this._value,a].reduce(b,1),this},divide:function(a){function b(a,b){var c=s(a,b);return a*c/(b*c)}return this._value=[this._value,a].reduce(b),this},difference:function(a){return Math.abs(t(this._value).subtract(a).value())},culture:function(a){if(!a)return this._config.currentCulture||x;var b=v[a];if(!b)throw new Error("Unknown culture : "+a);return this._config.currentCulture=a,o(this,b),this},language:function(a){if(console.warn("`language` is deprecated since version 1.6.0. Use `culture` instead"),!a)return this._config.currentCulture||x;var b=w[a];if(!b)throw new Error("Unknown language : "+a);return this._config.currentCulture=a,o(this,b),this},setCulture:function(a,b){return a=p(a,b),this.culture(a)},setLanguage:function(a,b){return console.warn("`setLanguage` is deprecated since version 1.6.0. Use `setCulture` instead"),a=p(a,b),this.language(a)},zeroFormat:function(a){return this._config.zeroFormat="string"==typeof a?a:null,this},defaultFormat:function(a){return this._config.defaultFormat="string"==typeof a?a:"0.0",this},defaultCurrencyFormat:function(a){return this._config.defaultCurrencyFormat="string"==typeof a?a:"0$",this}},B&&(module.exports=t),t.loadCulturesInNode("languages"),"undefined"==typeof ender&&(this.numbro=t),"function"==typeof define&&define.amd&&define([],function(){return t})}).call("undefined"==typeof window?this:window);